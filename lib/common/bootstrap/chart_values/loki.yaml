# remove if you don't want to use a custom image
kubectlImage:
  registry: set-by-engine-code
  repository: set-by-engine-code

loki:
  # remove if you don't want to use a custom image
  image:
    registry: set-by-engine-code
    repository: set-by-engine-code
  # set if you want to use authentication
  auth_enabled: false
  commonConfig:
    # for simple usage, without high throughput, you can use the 1 replica only
    # note: replication is assured by the storage backend
    replication_factor: 1
  ingester:
    chunk_idle_period: 3m
    chunk_block_size: 262144
    chunk_retain_period: 1m
    max_transfer_retries: 0
    lifecycler:
      ring:
        kvstore:
          store: memberlist
        replication_factor: 1
  memberlist:
    abort_if_cluster_join_fails: false
    bind_port: 7946
    join_members:
      # set loki headless service
      - loki-headless.logging.svc:7946
    max_join_backoff: 1m
    max_join_retries: 10
    min_join_backoff: 1s
  limits_config:
    ingestion_rate_mb: 20
    ingestion_burst_size_mb: 30
    enforce_metric_name: false
    reject_old_samples: true
    reject_old_samples_max_age: 168h
    max_concurrent_tail_requests: 100
    split_queries_by_interval: 15m
    max_query_lookback: 12w
  compactor:
    working_directory: /data/retention
    # configure storage provider for the compactor
    shared_store: aws
    compaction_interval: 10m
    retention_enabled: set-by-engine-code
    retention_delete_delay: 2h
    retention_delete_worker_count: 150
  table_manager:
    retention_deletes_enabled: set-by-engine-code
    retention_period: set-by-engine-code
  schema_config:
    configs:
      # set the schema for the index (2020 version can be deleted on a fresh install)
      - from: 2020-05-15
        store: boltdb-shipper
        object_store: s3
        schema: v11
        index:
          prefix: index_
          period: 24h
      - from: 2023-06-01
        store: boltdb-shipper
        object_store: s3
        schema: v12
        index:
          prefix: index_
          period: 24h
  storage:
    # configure the object storage backend
    bucketNames:
      chunks:
      ruler:
      admin:
    type: s3
    s3:
      s3:
      region:
      s3ForcePathStyle:
      insecure:
  storage_config:
    boltdb_shipper:
      active_index_directory: /data/loki/index
      shared_store: s3
      resync_interval: 5s
      cache_location: /data/loki/boltdb-cache

monitoring:
  dashboards:
    enabled: false
  rules:
    enabled: false
  serviceMonitor:
    enabled: false
    metricsInstance:
      enabled: false
  selfMonitoring:
    enabled: false
    grafanaAgent:
      installOperator: false

  grafanaAgent:
    enabled: false
  lokiCanary:
    enabled: false

test:
  enabled: false

gateway:
  enabled: false

# set the single binary version for basic usage
singleBinary:
  replicas: 1
  # set resources
  resources:
    limits:
      cpu: 1
      memory: 2Gi
    requests:
      cpu: 300m
      memory: 1Gi
  persistence:
    enabled: false
  extraVolumes:
    - name: data
      emptyDir: {}
    - name: storage
      emptyDir: {}
  extraVolumeMounts:
    - name: data
      mountPath: /data
    - name: storage
      mountPath: /var/loki
  # set disk persistence to reduce data loss in case of pod crash
  # persistence:
  #   storageClass: set-by-engine-code

serviceAccount:
  annotations: {}
