{%- if not is_storage %}
---
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: {{ sanitized_name }}
  namespace: {{ namespace }}
  labels:
    ownerId: {{ owner_id }}
    envId: {{ environment_id }}
    appId: {{ id }}
    app: {{ sanitized_name }}
spec:
  minAvailable: {%- if max_instances <= 1 %} 10% {% else %} 0 {%- endif %}
  selector:
    matchLabels:
      ownerId: {{ owner_id }}
      envId: {{ environment_id }}
      appId: {{ id }}
      app: {{ sanitized_name }}
{%- endif %}